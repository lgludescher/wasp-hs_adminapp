{% extends "base.html" %}

{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', path='css/manage_phd_student.css') }}" />
  <script type="module" src="{{ url_for('static', path='js/manage_phd_student.js') }}"></script>
{% endblock %}

{% block body %}
  <h1 class="page-title">PhD Student Details</h1>

  <section id="phd-student-details-section" class="details-box">
    </section>

  <div class="panel">
    <div class="panel-header">
      <button class="expand-btn btn" data-panel="courses">+</button>
      <h2>Courses</h2>
    </div>
    <div id="panel-content-courses" class="panel-content hidden">
        <button class="btn btn-secondary btn-show-add-form">Add Course</button>
        <form class="item-add-form hidden">
            <fieldset>
                <label>Filter by Term:
                    <select name="course_term_filter"></select>
                </label>
                <label>Filter by Activity:
                    <select name="course_activity_filter"></select>
                </label>
                <label>Course:
                    <select name="course_id" required></select>
                </label>
                <div class="detail-item"><label class="checkbox-label"><input name="is_completed" type="checkbox"> Completed?</label></div>
                <label>Grade:
                    <select name="grade">
                        <option value="">N/A</option>
                        <option value="pass">PASS</option>
                        <option value="fail">FAIL</option>
                    </select>
                </label>
                <div class="form-actions">
                    <button type="submit" class="btn btn-secondary save-btn">Save</button>
                    <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
                </div>
            </fieldset>
        </form>
        <div class="list-container">
            <table class="data-table"><thead></thead><tbody></tbody></table>
        </div>
    </div>
  </div>

  <div class="panel">
    <div class="panel-header">
      <button class="expand-btn btn" data-panel="activities">+</button>
      <h2>Activities</h2>
    </div>
    <div id="panel-content-activities" class="panel-content hidden">
      <div class="subsection">
        <h3>Grad School Activities</h3>
        <button class="btn btn-secondary btn-show-add-gsa-form">Add Grad School Activity</button>
        <form class="item-add-form add-gsa-form hidden">
          <fieldset>
            <label>Filter by Activity Type:
              <select name="gsa_type_filter"></select>
            </label>
            <label>Activity:
              <select name="gsa_id" required></select>
            </label>
            <div class="detail-item"><label class="checkbox-label"><input name="is_completed" type="checkbox"> Completed?</label></div>
            <label>Grade:
              <select name="grade">
                <option value="">N/A</option>
                <option value="pass">PASS</option>
                <option value="fail">FAIL</option>
              </select>
            </label>
            <div class="form-actions">
              <button type="submit" class="btn btn-secondary save-btn">Save</button>
              <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
            </div>
          </fieldset>
        </form>
        <div class="list-container">
          <table class="data-table gsa-table"><thead></thead><tbody></tbody></table>
        </div>
      </div>

      <div class="subsection">
        <h3>Semester Abroad</h3>
        <button class="btn btn-secondary btn-show-add-abroad-form">Add Semester Abroad</button>
        <form class="item-add-form add-abroad-form hidden">
          <fieldset>
            <label>Description: <input name="description" type="text" required></label>
            <label>Start Date: <input name="start_date" type="date"></label>
            <label>End Date: <input name="end_date" type="date"></label>
            <label>City: <input name="city" type="text"></label>
            <label>Country: <input name="country" type="text"></label>
            <label>Host Institution: <input name="host_institution" type="text"></label>
            <div class="form-actions">
              <button type="submit" class="btn btn-secondary save-btn">Save</button>
              <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
            </div>
          </fieldset>
        </form>
        <div class="list-container">
          <table class="data-table abroad-table"><thead></thead><tbody></tbody></table>
        </div>
      </div>
    </div>
  </div>

  <div class="panel">
    <div class="panel-header">
      <button class="expand-btn btn" data-panel="supervisors">+</button>
      <h2>Supervisors</h2>
    </div>
    <div id="panel-content-supervisors" class="panel-content hidden">
      <button class="btn btn-secondary btn-show-add-form">Add Supervisor</button>
      <form class="item-add-form hidden">
        <fieldset>
          <label>Role:
            <select name="supervisor_role_filter">
              <option value="researchers" selected>Researcher</option>
              <option value="postdocs">Postdoc</option>
            </select>
          </label>
          <label>Person:
            <select name="supervisor_role_id" required></select>
          </label>
          <label class="checkbox-label">
            <input name="is_main" type="checkbox"> Main Supervisor?
          </label>
          <div class="form-actions">
            <button type="submit" class="btn btn-secondary save-btn">Save</button>
            <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
          </div>
        </fieldset>
      </form>
      <div class="list-container">
        <table class="data-table"><thead></thead><tbody></tbody></table>
      </div>
    </div>
  </div>

  <div class="panel">
    <div class="panel-header">
      <button class="expand-btn btn" data-panel="projects">+</button>
      <h2>Projects</h2>
    </div>
    <div id="panel-content-projects" class="panel-content hidden">
      <button class="btn btn-secondary btn-show-add-form">Add Project</button>
      <form class="item-add-form hidden">
        <fieldset>
          <label>Filter by Call Type:
            <select name="project_call_type_filter"></select>
          </label>
          <label>Filter by Status:
            <select name="project_status_filter">
              <option value="">All projects</option>
              <option value="ongoing" selected>Ongoing</option>
              <option value="awaiting_report">Awaiting Report</option>
              <option value="completed">Completed</option>
            </select>
          </label>
          <label>Project:
            <select name="project_id" required></select>
          </label>
          <label class="checkbox-label">
            <input name="is_pi" type="checkbox"> Principal Investigator?
          </label>
          <label class="checkbox-label">
            <input name="is_leader" type="checkbox"> Project Leader?
          </label>
          <div class="form-actions">
            <button type="submit" class="btn btn-secondary save-btn">Save</button>
            <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
          </div>
        </fieldset>
      </form>
      <div class="list-container">
        <table class="data-table"><thead></thead><tbody></tbody></table>
      </div>
    </div>
  </div>

  <div class="panel">
    <div class="panel-header">
      <button class="expand-btn btn" data-panel="institutions">+</button>
      <h2>Institutions</h2>
    </div>
    <div id="panel-content-institutions" class="panel-content hidden">
      <button class="btn btn-secondary btn-show-add-form">Add Institution</button>
      <form class="item-add-form hidden">
        <fieldset>
          <label>Institution:
            <select name="institution_id" required></select>
          </label>
          <label>Start Date:
            <input name="start_date" type="date" min="2020-01-01">
          </label>
          <label>End Date:
            <input name="end_date" type="date" min="2020-01-01">
          </label>
          <div class="form-actions">
            <button type="submit" class="btn btn-secondary save-btn">Save</button>
            <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
          </div>
        </fieldset>
      </form>
      <div class="list-container">
        <table class="data-table"><thead></thead><tbody></tbody></table>
      </div>
    </div>
  </div>

  <div class="panel">
    <div class="panel-header">
      <button class="expand-btn btn" data-panel="fields">+</button>
      <h2>Academic Fields</h2>
    </div>
    <div id="panel-content-fields" class="panel-content hidden">
      <button class="btn btn-secondary btn-show-add-form">Add Academic Field</button>
      <form class="item-add-form hidden">
        <fieldset>
          <label>Filter by Branch:
            <select name="field_branch_filter"></select>
          </label>
          <label>Field:
            <select name="field_id" required></select>
          </label>
          <div class="form-actions">
            <button type="submit" class="btn btn-secondary save-btn">Save</button>
            <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
          </div>
        </fieldset>
      </form>
      <div class="list-container">
        <table class="data-table"><thead></thead><tbody></tbody></table>
      </div>
    </div>
  </div>

  <div class="panel">
    <div class="panel-header">
      <button class="expand-btn btn" data-panel="letters">+</button>
      <h2>Decision Letters</h2>
    </div>
    <div id="panel-content-letters" class="panel-content hidden">
      <button class="btn btn-secondary btn-show-add-form">Add Decision Letter</button>
      <form class="item-add-form hidden">
        <fieldset>
          <label>Link:
            <input name="link" type="text" required placeholder="https://...">
          </label>
          <div class="form-actions">
            <button type="submit" class="btn btn-secondary save-btn">Save</button>
            <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
          </div>
        </fieldset>
      </form>
      <div class="list-container">
        <table class="data-table"><thead></thead><tbody></tbody></table>
      </div>
    </div>
  </div>


  <div id="modal-confirm" class="modal hidden">
    <div class="modal-content">
      <p id="modal-text"></p>
      <div class="modal-actions">
        <button id="modal-confirm-btn" class="btn">Confirm</button>
        <button id="modal-cancel-btn" class="btn cancel-btn">Cancel</button>
      </div>
    </div>
  </div>
{% endblock %}
